import random
import json
from flask import Flask, request, jsonify
from featureExtraction import calculateFeatures
import pandas as pd


# input_data = {'c': ['72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116', '117', '118', '119', '120', '121', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116'], 't': ['3518', '3542', '3566', '3590', '3614', '3638', '3662', '3686', '3710', '3734', '3758', '3782', '3806', '3830', '3854', '3878', '3902', '3926', '3950', '3974', '3998', '4022', '4046', '4070', '4094', '4118', '4142', '4166', '4190', '4214', '4238', '4262', '4286', '4310', '4334', '4358', '4382', '4407', '4431', '4455', '4479', '4504', '3', '27', '51', '75', '99', '123', '147', '171', '2329', '2354', '2379', '2404', '2429', '2454', '2479', '2504', '2529', '2554', '2579', '2604', '2629', '2655', '2680', '2705', '2730', '2755', '2780', '2805', '2830', '2855', '2880', '2905', '2930', '2955', '2980', '3005', '3030', '3055', '3080', '3105', '3130', '3155', '3180', '3205', '3230', '3255', '3280', '3305', '3330', '3', '28', '53', '78', '103', '128', '154', '179', '204'], 'x': ['-2.60', '-4.46', '-4.18', '-3.69', '-4.70', '-0.29', '0.66', '-0.90', '-2.98', '-3.43', '-1.93', '-0.31', '-0.91', '-2.23', '-2.65', '-1.78', '-1.16', '-1.42', '-2.03', '-2.44', '-1.56', '-1.09', '-1.96', '-2.26', '-1.64', '-1.48', '-1.78', '-2.17', '-2.47', '-3.02', '-1.71', '-1.69', '-3.66', '-2.34', '-0.05', '-1.84', '-2.96', '-1.12', '-2.76', '-1.64', '4.81', '1.00', '-1.30', '-2.61', '-0.12', '-1.70', '-1.37', '-0.40', '-4.46', '-1.63', '-0.83', '-6.80', '-4.94', '-10.49', '2.73', '1.39', '-3.77', '-3.21', '-5.01', '-2.68', '1.79', '-2.60', '-2.37', '-4.18', '4.05', '3.22', '-2.53', '-2.11', '-2.90', '1.36', '0.67', '-3.94', '-3.44', '-1.86', '-1.33', '-1.83', '-5.51', '-11.19', '2.21', '0.85', '-1.60', '-3.86', '-4.46', '-2.50', '1.65', '-2.12', '-2.01', '-2.86', '-1.52', '1.35', '2.15', '-1.88', '-5.80', '-3.57', '0.52', '0.98', '-1.09', '-3.60', '-2.65', '-1.00'], 'y': ['-3.40', '-4.39', '-5.68', '-4.75', '-4.65', '-6.53', '-3.34', '-2.72', '-3.80', '-6.08', '-5.17', '-5.01', '-3.17', '-2.78', '-5.11', '-5.91', '-4.47', '-3.67', '-3.49', '-4.32', '-5.36', '-5.13', '-4.16', '-4.07', '-4.11', '-4.61', '-4.93', '-4.98', '-4.59', '-4.01', '-6.70', '-5.83', '-3.08', '-2.22', '-6.12', '-5.16', '-3.26', '-3.80', '-3.89', '-2.25', '-6.77', '-6.30', '-3.46', '-0.88', '-6.66', '-4.31', '-1.83', '-3.24', '-4.86', '-6.74', '-4.88', '-3.55', '-5.04', '-7.26', '-9.00', '-0.62', '-0.19', '0.26', '-6.51', '-8.80', '-5.47', '-0.71', '-4.66', '-4.66', '-5.34', '-1.67', '-1.94', '-3.53', '-6.36', '-6.83', '-3.04', '-2.07', '-4.78', '-7.56', '-5.08', '-1.93', '-3.31', '-4.25', '-9.14', '-3.23', '-1.63', '-1.70', '-5.97', '-9.61', '-5.83', '-0.98', '-2.47', '-5.27', '-5.45', '-3.09', '-1.87', '-1.70', '-6.76', '-6.67', '-5.75', '-4.64', '-2.66', '-2.71', '-6.18', '-5.73'], 'z': ['6.40', '4.65', '5.29', '4.53', '4.78', '7.93', '7.69', '7.11', '7.23', '6.45', '5.25', '7.41', '7.38', '6.33', '6.54', '6.90', '6.24', '6.80', '7.40', '6.69', '6.35', '6.81', '6.77', '6.70', '7.05', '6.67', '6.23', '6.33', '6.11', '5.45', '6.26', '6.28', '6.30', '5.13', '8.22', '5.85', '6.12', '9.08', '6.32', '6.75', '9.36', '6.55', '7.63', '7.36', '9.90', '6.93', '7.71', '6.90', '5.20', '6.39', '5.78', '6.62', '3.08', '3.78', '7.09', '6.30', '7.02', '7.75', '5.48', '3.52', '7.34', '7.70', '7.95', '7.37', '9.60', '8.27', '8.04', '9.48', '7.35', '6.14', '6.87', '7.02', '5.13', '4.89', '5.83', '7.30', '3.42', '5.10', '7.19', '5.87', '7.29', '7.85', '5.05', '4.07', '7.48', '6.98', '7.35', '7.24', '8.69', '8.85', '8.83', '6.32', '5.75', '5.34', '6.27', '6.83', '6.88', '6.76', '6.37', '6.03']}

app = Flask(__name__)
@app.route('/double-data', methods=['POST'])
def double_data():
    try:
        input_data = request.json  
        # print(input_data)
        df = pd.DataFrame.from_dict(input_data)
        df = df.astype(float)
        featuresJson = calculateFeatures(df['x'], df['y'], df['z'])
        print(featuresJson)
        return featuresJson  
    except Exception as e:
        print('Error processing data:', str(e))
        return jsonify({'error': 'An error occurred'}), 500


portNum= 3002
@app.route('/', methods=['GET'])
def home():
    return f'<h1>Python Script is running on port {portNum}'



if __name__ == '__main__':
    # double_data()
    app.run(port=portNum)